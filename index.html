<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/heart.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>IndiDate - Find Your Perfect Match</title>
    <script>
      // CRITICAL: Must run BEFORE any module loads
      // Polyfills for axios, simple-peer and Node.js globals
      (function() {
        // Initialize globalThis
        if (typeof globalThis === 'undefined') {
          window.globalThis = window;
        }
        
        // Set up global object
        window.global = window.global || window;
        globalThis.global = globalThis.global || globalThis;
        
        // Process polyfill - CRITICAL for axios
        if (typeof process === 'undefined') {
          window.process = { 
            env: { NODE_ENV: 'production' },
            browser: true,
            version: '',
            versions: {},
            nextTick: function(fn) { setTimeout(fn, 0); }
          };
          global.process = window.process;
          globalThis.process = window.process;
        }
        
        // Buffer polyfill
        if (typeof Buffer === 'undefined') {
          window.Buffer = { 
            isBuffer: function() { return false; }
          };
          global.Buffer = window.Buffer;
          globalThis.Buffer = window.Buffer;
        }
        
        // Ensure native Request/Response are available globally
        // This is critical for axios http adapter
        if (typeof Request !== 'undefined') {
          window.Request = Request;
          global.Request = Request;
          globalThis.Request = Request;
        }
        
        if (typeof Response !== 'undefined') {
          window.Response = Response;
          global.Response = Response;
          globalThis.Response = Response;
        }
        
        // Ensure fetch is available
        if (typeof fetch !== 'undefined') {
          window.fetch = fetch;
          global.fetch = fetch;
          globalThis.fetch = fetch;
        }
      })();
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>
